<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <title>Test</title>
        <style>
            #dify-chatbot-bubble-button {
                background-color: #1C64F2 !important;
            }
            #dify-chatbot-bubble-window {
                width: 24rem !important;
                height: 40rem !important;
            }
        </style>

<!--        监听器样式-->
        <style>
            .observedDiv {
                width: 300px;
                min-height: 50px;
                border: 1px solid black;
                padding: 10px;
                margin-bottom: 10px;
            }
            #outputDiv {
                width: 300px;
                min-height: 50px;
                border: 1px solid green;
                padding: 10px;
            }
        </style>
        <script
                src="min.js"
                id="L51PiXQNx7qWVHqh"
                defer>
        </script>

    </head>

    <body>

<!--    <script>-->
<!--        window.difyChatbotConfig = {-->
<!--            token: 'L51PiXQNx7qWVHqh',-->
<!--            baseUrl: 'http://localhost:8081'-->
<!--        }-->
<!--    </script>-->
    <h1>AI 回答:</h1>
    <div id="ai-response" style="border: 1px solid #000; padding: 10px; min-height: 50px;"></div>

    <script>
        window.difyChatbotConfig = {
            token: 'L51PiXQNx7qWVHqh',
            baseUrl: 'http://localhost:8081'
        }

        // 监听 WebSocket 消息
        let socket = new WebSocket("ws://localhost:8081");

        socket.onmessage = function(event) {
            let messageData = JSON.parse(event.data);
            if (messageData && messageData.response) {
                document.getElementById("ai-response").innerText = messageData.response;
            }
        };

        socket.onerror = function(error) {
            console.error("WebSocket 错误:", error);
        };
    </script>

<!--    监听-->
<script>


</script>

    </body>


	
</html>